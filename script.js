function showTab(e){document.querySelectorAll(".tab-btn").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".block-category").forEach(e=>e.classList.remove("active")),document.querySelector(`.tab-btn[onclick="showTab('${e}')"]`).classList.add("active"),document.getElementById(e).classList.add("active")}function showSubTab(e,t){let a=document.getElementById(e),n=a.querySelectorAll(".sub-block-category"),l=a.querySelectorAll(".sub-tab-btn");n.forEach(e=>e.classList.remove("active")),l.forEach(e=>e.classList.remove("active")),document.getElementById(e+"-"+t).classList.add("active"),Array.from(l).find(e=>e.onclick.toString().includes(`'${t}'`)).classList.add("active")}document.getElementById("sidebarToggle").addEventListener("click",()=>{document.getElementById("sidebar").classList.toggle("open")}),document.querySelectorAll(".block").forEach(e=>{e.addEventListener("dragstart",dragStart)});const workspace=document.getElementById("workspace");function dragStart(e){e.dataTransfer.setData("text/plain",e.target.outerHTML),e.dataTransfer.effectAllowed="move"}function createParamInputs(e,t){let a=document.createElement("div");switch(a.className="param-inputs",e){case"spawnNPC":addInput(a,"name","Имя NPC"),addInput(a,"spawnPos","Позиция [x,y,z]"),addInput(a,"modelName","Модель"),addInput(a,"textureName","Текстура"),addDropdown(a,["true","false"],"showName","показать имя над нпс?");break;case"TP NPC":addInput(a,"npcId","UUID NPC"),addInput(a,"pos","Double позиция [x,y,z]");break;case"PlayAnimation":addInput(a,"nameNPC","UUID НПС"),addInput(a,"nameAnimation","название анимации"),addDropdown(a,["Once","Looped","Freeze"],"animationType","тип анимации");break;case"ReplayNPC":addInput(a,"nameNPC","UUID НПС"),addInput(a,"nameNBT","название реплея");break;case"TraderNPC":addInput(a,"name","Имя торговца");break;case"createPlayer":break;case"TP Player":addInput(a,"pos","Double позиция [x,y,z]")}t.appendChild(a)}function addInput(e,t,a){let n=document.createElement("input");n.type="text",n.dataset.param=t,n.placeholder=a,e.appendChild(n)}function addDropdown(e,t,a,n){let l=document.createElement("div");l.style.marginBottom="5px";let d=document.createElement("label");d.textContent=n,d.style.display="block",d.style.fontSize="12px",d.style.marginBottom="3px",l.appendChild(d);let r=document.createElement("select");r.dataset.param=a;let o=document.createElement("option");o.value="",o.textContent="-- выберите --",o.disabled=!0,o.selected=!0,r.appendChild(o),t.forEach(e=>{let t=document.createElement("option");t.value=e,t.textContent=e,r.appendChild(t)}),l.appendChild(r),e.appendChild(l)}function drop(e){e.preventDefault();let t=e.dataTransfer.getData("text/plain"),a=document.createElement("div");a.innerHTML=t;let n=a.firstChild;if(!n.classList.contains("added")){n.classList.add("added");let l=n.getAttribute("data-type");createParamInputs(l,n);let d=document.createElement("button");d.textContent="\xd7",d.className="delete-btn",d.onclick=()=>n.remove(),n.appendChild(d),workspace.appendChild(n)}}function generateCode(){let e=workspace.querySelectorAll(".block.added"),t="";e.forEach(e=>{let a=e.getAttribute("data-code-template"),n=e.querySelectorAll(".param-inputs input, .param-inputs select"),l={};n.forEach(e=>{let t=e.dataset.param;l[t]=e.value||""});let d=a;for(let r in l){let o=RegExp(`%${r}%`,"g");d=d.replace(o,l[r])}t+=d+"\n\n"}),document.getElementById("output").textContent=t||"(нет блоков)"}workspace.addEventListener("dragover",e=>e.preventDefault()),workspace.addEventListener("drop",drop);
